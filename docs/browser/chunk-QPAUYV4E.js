import{a as Ze,b as Se,c as ye,d as De,e as Oe,f as Pe,g as Ee,h as $}from"./chunk-5EUWCX66.js";import{a as A,b as me,c as se,d as pe,e as ue,f as fe,g as ge,h as xe,i as _e,j as he,k as Ce,m as ve,n as Me,q as Z,r as be,s as S,t as we,u as ze}from"./chunk-ENXU6K36.js";import"./chunk-OQEBNBKV.js";import{a as ie,g as ae,h as V,i as re,j as N}from"./chunk-MAVI32LF.js";import"./chunk-EJJBCPAK.js";import{$ as R,aa as le,ba as ce,ca as H,da as de,ea as j}from"./chunk-H2ONE3W6.js";import{b as J,d as b,g as K,h as W,k as X,l as Y,m as ee,o as te,t as ne,u as oe,v as F}from"./chunk-TSXBLCTM.js";import"./chunk-X7ZST7BG.js";import{$b as I,Ab as o,Bb as m,Cb as C,Db as v,Fb as _,Ib as s,Ic as U,Kb as u,Lc as T,Ob as P,Pb as E,Qb as k,Ub as r,Vb as M,Wa as c,Wb as q,Xa as h,_ as G,a as D,ac as Q,b as B,ia as O,mb as f,o as w,qa as g,qb as p,ra as x,sb as L,zb as i}from"./chunk-G46DRSWM.js";var z=class n{zonas=[{id:1,vehiculo:1,conductor:"Luis Suarez",descripcion:`Desde calle x
Hasta calle x
Barra J`,coordenadas:"mymaps.com/agualuz/zona1"},{id:2,vehiculo:2,conductor:"Oscar Martinez",descripcion:`Desde calle x
Hasta calle x`,coordenadas:"mymaps.com/agualuz/zona2"},{id:3,vehiculo:3,conductor:"Nestor Patricio",descripcion:`Desde calle x
Hasta calle x`,coordenadas:"mymaps.com/agualuz/zona3"},{id:4,vehiculo:4,conductor:"Roberto Lamas",descripcion:`Desde calle x
Hasta calle x`,coordenadas:"mymaps.com/agualuz/zona4"},{id:5,vehiculo:5,conductor:"Marcos Lopez",descripcion:`Desde calle x
Hasta calle x`,coordenadas:"mymaps.com/agualuz/zona5"},{id:6,vehiculo:6,conductor:"Gerardo Gimenez",descripcion:`Desde calle x
Hasta calle x`,coordenadas:"mymaps.com/agualuz/zona6"},{id:7,vehiculo:7,conductor:"Pedro Gomez",descripcion:`Desde calle x
Hasta calle x`,coordenadas:"mymaps.com/agualuz/zona7"},{id:8,vehiculo:8,conductor:"Juan Pablo Perez",descripcion:`Desde calle x
Hasta calle x`,coordenadas:"mymaps.com/agualuz/zona8"},{id:9,vehiculo:9,conductor:"Matias Luis",descripcion:`Desde calle x
Hasta calle x`,coordenadas:"mymaps.com/agualuz/zona9"},{id:10,vehiculo:10,conductor:"Eduard Morales",descripcion:`Desde calle x
Hasta calle x`,coordenadas:"mymaps.com/agualuz/zona10"},{id:11,vehiculo:11,conductor:"Mateo Pereira",descripcion:`Desde calle x
Hasta calle x`,coordenadas:"mymaps.com/agualuz/zona11"}];constructor(){}getZonas(){return w(this.zonas)}getZonaById(t){let e=this.zonas.find(a=>a.id===t);return w(e)}updateZona(t){let e=this.zonas.findIndex(a=>a.id===t.id);return e!==-1&&(this.zonas[e]=D({},t)),w(t)}addZona(t){let e=Math.max(...this.zonas.map(l=>l.id))+1,a=B(D({},t),{id:e});return this.zonas.push(a),w(a)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var Fe=()=>[5,10,25];function Ve(n,t){n&1&&(i(0,"th",30),r(1,"ZONA"),o())}function Ne(n,t){if(n&1){let e=_();i(0,"td",31),s("click",function(){let l=g(e).$implicit,d=u();return x(d.onSelectZona(l))}),r(1),o()}if(n&2){let e=t.$implicit;c(),M(e.id)}}function Re(n,t){n&1&&(i(0,"th",30),r(1,"Veh\xEDculo"),o())}function He(n,t){if(n&1){let e=_();i(0,"td",31),s("click",function(){let l=g(e).$implicit,d=u();return x(d.onSelectZona(l))}),r(1),o()}if(n&2){let e=t.$implicit;c(),M(e.vehiculo)}}function je(n,t){n&1&&(i(0,"th",30),r(1,"Conductor"),o())}function Ae(n,t){if(n&1){let e=_();i(0,"td",31),s("click",function(){let l=g(e).$implicit,d=u();return x(d.onSelectZona(l))}),r(1),o()}if(n&2){let e=t.$implicit;c(),M(e.conductor)}}function $e(n,t){n&1&&(i(0,"th",32),r(1,"Descripci\xF3n"),o())}function Be(n,t){if(n&1){let e=_();i(0,"td",33),s("click",function(){let l=g(e).$implicit,d=u();return x(d.onSelectZona(l))}),i(1,"div",34),r(2),o()()}if(n&2){let e=t.$implicit;c(2),M(e.descripcion)}}function Ge(n,t){n&1&&(i(0,"th",32),r(1,"Coordenadas"),o())}function Le(n,t){if(n&1){let e=_();i(0,"td",35),s("click",function(){let l=g(e).$implicit,d=u();return x(d.onSelectZona(l))}),i(1,"a",36),r(2),o()()}if(n&2){let e=t.$implicit;c(2),M(e.coordenadas)}}function qe(n,t){n&1&&(i(0,"th",32),r(1,"Editar"),o())}function Qe(n,t){if(n&1){let e=_();i(0,"td",37)(1,"button",38),s("click",function(l){let d=g(e).$implicit;return u().openEditZonaDialog(d),x(l.stopPropagation())}),i(2,"mat-icon"),r(3,"edit"),o()()()}}function Ue(n,t){n&1&&m(0,"tr",39)}function Je(n,t){if(n&1){let e=_();i(0,"tr",40),s("click",function(){let l=g(e).$implicit,d=u();return x(d.onSelectZona(l))}),o()}if(n&2){let e=t.$implicit,a=u();L("selected-row",a.selectedZona&&a.selectedZona.id===e.id)}}function Ke(n,t){if(n&1&&(i(0,"div",41)(1,"h2",42),r(2),o(),i(3,"div",43),m(4,"img",44),o()()),n&2){let e=u();c(2),q("Mapa zona ",e.selectedZona.id,""),c(2),p("alt","Mapa de la zona "+e.selectedZona.id)}}function We(n,t){n&1&&(i(0,"div",45)(1,"div",46)(2,"p",47),r(3,"Seleccione una zona"),m(4,"br"),r(5,"para ver el mapa"),o()()())}var y=class n{constructor(t,e,a,l){this.fb=t;this.zonasService=e;this.dialogRef=a;this.data=l;this.isNew=l.isNew,this.dialogTitle=this.isNew?"Agregar nueva zona":"Editar zona"}zonaForm;isNew;dialogTitle;ngOnInit(){this.initForm()}initForm(){let t=this.data.zona||{id:0,vehiculo:0,conductor:"",descripcion:"",coordenadas:""};this.zonaForm=this.fb.group({id:[t.id],vehiculo:[t.vehiculo,[b.required,b.min(1)]],conductor:[t.conductor,b.required],descripcion:[t.descripcion,b.required],coordenadas:[t.coordenadas,b.required]})}onSubmit(){if(this.zonaForm.valid){let t=this.zonaForm.value;this.isNew?this.zonasService.addZona(t).subscribe({next:e=>{this.dialogRef.close(e)},error:e=>console.error("Error al agregar zona:",e)}):this.zonasService.updateZona(t).subscribe({next:e=>{this.dialogRef.close(e)},error:e=>console.error("Error al actualizar zona:",e)})}}static \u0275fac=function(e){return new(e||n)(h(ne),h(z),h(Ze),h(Se))};static \u0275cmp=O({type:n,selectors:[["app-zona-edit-dialog"]],standalone:!0,features:[I],decls:38,vars:3,consts:[[1,"edit-zona-dialog"],["mat-dialog-title",""],[3,"formGroup"],[1,"form-row"],[1,"form-field"],["appearance","outline"],["matInput","","type","number","formControlName","id","readonly",""],["matInput","","type","number","formControlName","vehiculo"],["appearance","outline",1,"full-width"],["matInput","","formControlName","conductor"],["matInput","","formControlName","descripcion","rows","3"],["matInput","","formControlName","coordenadas"],[1,"map-preview"],[1,"map-label"],[1,"map-container"],["src","assets/images/map-placeholder.jpg","alt","Vista previa del mapa"],["align","end"],["mat-button","","mat-dialog-close","",1,"volver-link"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"h2",1),r(2),o(),i(3,"mat-dialog-content")(4,"form",2)(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),r(9,"Zona"),o(),m(10,"input",6),o()(),i(11,"div",4)(12,"mat-form-field",5)(13,"mat-label"),r(14,"Veh\xEDculo"),o(),m(15,"input",7),o()()(),i(16,"mat-form-field",8)(17,"mat-label"),r(18,"Conductor"),o(),m(19,"input",9),o(),i(20,"mat-form-field",8)(21,"mat-label"),r(22,"Descripci\xF3n"),o(),m(23,"textarea",10),o(),i(24,"mat-form-field",8)(25,"mat-label"),r(26,"Coordenadas"),o(),m(27,"input",11),o(),i(28,"div",12)(29,"div",13),r(30,"Mapa zona"),o(),i(31,"div",14),m(32,"img",15),o()()()(),i(33,"mat-dialog-actions",16)(34,"a",17),r(35,"\xAB Volver"),o(),i(36,"button",18),s("click",function(){return a.onSubmit()}),r(37,"Guardar cambios"),o()()()),e&2&&(c(2),M(a.dialogTitle),c(2),p("formGroup",a.zonaForm),c(32),p("disabled",a.zonaForm.invalid))},dependencies:[T,F,X,J,Y,K,W,ee,te,$,De,Oe,Ee,Pe,H,le,R,V,ae,ie,N,re,A,j],styles:[".edit-zona-dialog[_ngcontent-%COMP%]{max-width:650px;padding:0 10px}.form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px}.form-field[_ngcontent-%COMP%]{flex:1}.full-width[_ngcontent-%COMP%]{width:100%}.map-preview[_ngcontent-%COMP%]{margin-top:16px}.map-label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:8px}.map-container[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;width:200px;height:150px;margin-bottom:16px}.map-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.volver-link[_ngcontent-%COMP%]{color:#666;margin-right:auto}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 0}"]})},ke=class n{constructor(t,e){this.zonasService=t;this.dialog=e}displayedColumns=["zona","vehiculo","conductor","descripcion","coordenadas","editar"];dataSource;selectedZona=null;mapImageUrl="";paginator;sort;ngOnInit(){this.loadZonas()}loadZonas(){this.zonasService.getZonas().subscribe(t=>{this.dataSource=new Me(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(t){let e=t.target.value;this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}onSelectZona(t){console.log("Zona seleccionada:",t),this.selectedZona=t}getMapUrl(){return this.mapImageUrl||"https://maps.googleapis.com/maps/api/staticmap?center=40.7128,-74.0060&zoom=13&size=600x300&maptype=roadmap"}openAddZonaDialog(){this.dialog.open(y,{width:"650px",data:{zona:null,isNew:!0}}).afterClosed().subscribe(e=>{e&&this.loadZonas()})}openEditZonaDialog(t){this.dialog.open(y,{width:"650px",data:{zona:t,isNew:!1}}).afterClosed().subscribe(a=>{a&&(this.loadZonas(),this.selectedZona&&this.selectedZona.id===t.id&&(this.selectedZona=a))})}static \u0275fac=function(e){return new(e||n)(h(z),h(ye))};static \u0275cmp=O({type:n,selectors:[["app-zonas"]],viewQuery:function(e,a){if(e&1&&(P(Z,5),P(S,5)),e&2){let l;E(l=k())&&(a.paginator=l.first),E(l=k())&&(a.sort=l.first)}},standalone:!0,features:[I],decls:41,vars:7,consts:[[1,"zonas-container"],[1,"page-title"],[1,"search-actions-container"],[1,"search-container"],[1,"search-icon"],["type","text","placeholder","Buscar zona",1,"search-input",3,"keyup"],[1,"actions-container"],["mat-icon-button","",1,"delete-button"],["mat-raised-button","","color","primary",1,"add-button",3,"click"],[1,"content-container"],[1,"table-container"],["mat-table","","matSort","",1,"zonas-table",3,"dataSource"],["matColumnDef","zona"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","clickable-cell",3,"click",4,"matCellDef"],["matColumnDef","vehiculo"],["matColumnDef","conductor"],["matColumnDef","descripcion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","descripcion-cell clickable-cell",3,"click",4,"matCellDef"],["matColumnDef","coordenadas"],["mat-cell","","class","coordenadas-cell clickable-cell",3,"click",4,"matCellDef"],["matColumnDef","editar"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected-row","click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"map-container"],["class","map-card",4,"ngIf"],["class","empty-map-card",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"clickable-cell",3,"click"],["mat-header-cell",""],["mat-cell","",1,"descripcion-cell","clickable-cell",3,"click"],[1,"descripcion-text"],["mat-cell","",1,"coordenadas-cell","clickable-cell",3,"click"],[1,"coordenadas-link"],["mat-cell",""],["mat-icon-button","","color","primary",1,"edit-button",3,"click"],["mat-header-row",""],["mat-row","",3,"click"],[1,"map-card"],[1,"map-title"],[1,"map-image-wrapper"],["src","assets/images/map-zona1.jpg",1,"map-image",3,"alt"],[1,"empty-map-card"],[1,"empty-map-content"],[1,"empty-map-text"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"h1",1),r(2,"ZONAS"),o(),i(3,"div",2)(4,"div",3)(5,"mat-icon",4),r(6,"search"),o(),i(7,"input",5),s("keyup",function(d){return a.applyFilter(d)}),o()(),i(8,"div",6)(9,"button",7)(10,"mat-icon"),r(11,"delete"),o()(),i(12,"button",8),s("click",function(){return a.openAddZonaDialog()}),r(13," Agregar nueva zona "),o()()(),i(14,"div",9)(15,"div",10)(16,"table",11),C(17,12),f(18,Ve,2,0,"th",13)(19,Ne,2,1,"td",14),v(),C(20,15),f(21,Re,2,0,"th",13)(22,He,2,1,"td",14),v(),C(23,16),f(24,je,2,0,"th",13)(25,Ae,2,1,"td",14),v(),C(26,17),f(27,$e,2,0,"th",18)(28,Be,3,1,"td",19),v(),C(29,20),f(30,Ge,2,0,"th",18)(31,Le,3,1,"td",21),v(),C(32,22),f(33,qe,2,0,"th",18)(34,Qe,4,0,"td",23),v(),f(35,Ue,1,0,"tr",24)(36,Je,1,2,"tr",25),o(),m(37,"mat-paginator",26),o(),i(38,"div",27),f(39,Ke,5,2,"div",28)(40,We,6,0,"div",29),o()()()),e&2&&(c(16),p("dataSource",a.dataSource),c(19),p("matHeaderRowDef",a.displayedColumns),c(),p("matRowDefColumns",a.displayedColumns),c(),p("pageSizeOptions",Q(6,Fe)),c(2),p("ngIf",a.selectedZona),c(),p("ngIf",!a.selectedZona))},dependencies:[T,U,oe,F,ve,me,pe,xe,ue,se,_e,fe,ge,he,Ce,be,Z,ze,S,we,V,N,H,R,ce,j,de,$,A],styles:[".zonas-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;background-color:#2196f3;overflow:auto;padding-bottom:20px}.page-title[_ngcontent-%COMP%]{color:#fff;font-size:20px;font-weight:500;margin:20px 0 10px 20px}.search-actions-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 20px;margin-bottom:20px}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff3;border-radius:20px;padding:5px 15px;width:300px}.search-icon[_ngcontent-%COMP%]{color:#fff;margin-right:8px}.search-input[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;flex-grow:1;outline:none;font-size:14px}.search-input[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.actions-container[_ngcontent-%COMP%]{display:flex;align-items:center}.delete-button[_ngcontent-%COMP%]{color:#fff;margin-right:10px}.add-button[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff;border-radius:20px;padding:0 20px;height:36px;font-size:14px;font-weight:400}.content-container[_ngcontent-%COMP%]{display:flex;gap:20px;padding:0 20px}.table-container[_ngcontent-%COMP%]{flex:3;background-color:#fff;border-radius:10px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.zonas-table[_ngcontent-%COMP%]{width:100%}.mat-mdc-header-row[_ngcontent-%COMP%]{background-color:#f5f5f5}.mat-mdc-header-cell[_ngcontent-%COMP%]{color:#666;font-size:13px;font-weight:500;padding:12px 16px}.mat-mdc-cell[_ngcontent-%COMP%]{padding:12px 16px;font-size:14px;color:#333;border-bottom:1px solid #f0f0f0}.mat-mdc-row[_ngcontent-%COMP%]{height:50px}.mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.selected-row[_ngcontent-%COMP%]{background-color:#fff8e1}.descripcion-cell[_ngcontent-%COMP%]{max-width:200px}.descripcion-text[_ngcontent-%COMP%]{white-space:pre-line;overflow:hidden;text-overflow:ellipsis;max-height:40px}.coordenadas-cell[_ngcontent-%COMP%]{max-width:150px}.coordenadas-link[_ngcontent-%COMP%]{color:#2196f3;text-decoration:none}.edit-button[_ngcontent-%COMP%]{color:#2196f3}.clickable-cell[_ngcontent-%COMP%]{cursor:pointer}.map-container[_ngcontent-%COMP%]{flex:2;min-width:350px}.map-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:16px;box-shadow:0 2px 8px #0000001a;height:100%;display:flex;flex-direction:column}.map-title[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;font-weight:500;color:#333;text-align:center}.map-image-wrapper[_ngcontent-%COMP%]{width:100%;flex:1;border-radius:8px;overflow:hidden}.map-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.zona-info[_ngcontent-%COMP%]{margin-top:16px}.info-item[_ngcontent-%COMP%]{display:flex;margin-bottom:8px}.info-label[_ngcontent-%COMP%]{font-weight:500;width:100px;flex-shrink:0}.info-value[_ngcontent-%COMP%]{flex-grow:1}.coordenadas-text[_ngcontent-%COMP%]{color:#2196f3}.empty-map-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;height:400px;display:flex;justify-content:center;align-items:center;box-shadow:0 2px 8px #0000001a}.empty-map-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.empty-map-text[_ngcontent-%COMP%]{color:#777;font-size:18px;text-align:center;line-height:1.5}.mat-mdc-paginator[_ngcontent-%COMP%]{background:transparent}@media (max-width: 992px){.content-container[_ngcontent-%COMP%]{flex-direction:column}.map-container[_ngcontent-%COMP%]{margin-top:20px}}"]})};export{y as ZonaEditDialogComponent,ke as ZonasComponent};
