import{a as h}from"./chunk-YCMZOG5D.js";import{a as m}from"./chunk-X7ZST7BG.js";import{D as o,_ as l,a as p,b as c,da as u,o as t,p as a}from"./chunk-G46DRSWM.js";var n=[{id:"1",nombre:"Juan P\xE9rez",telefono:"11-1234-5678",email:"juan.perez@email.com",direccion:"Av. Rivadavia 1234",estado:"activo",fechaRegistro:new Date("2024-01-15"),ultimaActualizacion:new Date("2024-04-20"),vehiculo:"Fiat Fiorino",fechaInicio:"2024-01-15",ultimoPedido:"2024-04-23",estadisticas:{pedidosEntregados:145,noEntregados:3,entregadosATiempo:140,entregadosConDemora:5,promedioTiempoEntrega:25}},{id:"2",nombre:"Mar\xEDa Gonz\xE1lez",telefono:"11-2345-6789",email:"maria.gonzalez@email.com",direccion:"Calle Corrientes 567",estado:"activo",fechaRegistro:new Date("2024-02-01"),ultimaActualizacion:new Date("2024-04-22"),vehiculo:"Renault Kangoo",fechaInicio:"2024-02-01",ultimoPedido:"2024-04-24",estadisticas:{pedidosEntregados:98,noEntregados:1,entregadosATiempo:95,entregadosConDemora:3,promedioTiempoEntrega:22}}],s={1:[{id:"p1",fechaHora:new Date("2024-04-23T10:30:00"),cliente:"Carlos L\xF3pez",destino:"San Mart\xEDn 456",estado:"entregado",tiempoEstimado:30,canal:"whatsapp",observaciones:"Entregar en porter\xEDa"},{id:"p2",fechaHora:new Date("2024-04-23T14:15:00"),cliente:"Ana Mart\xEDnez",destino:"Belgrano 789",estado:"en_camino",tiempoEstimado:25,canal:"telefono",observaciones:"Llamar al llegar"},{id:"p3",fechaHora:new Date("2024-04-24T09:00:00"),cliente:"Luis Rodr\xEDguez",destino:"Sarmiento 123",estado:"pendiente",tiempoEstimado:35,canal:"web",observaciones:void 0}],2:[{id:"p4",fechaHora:new Date("2024-04-24T11:00:00"),cliente:"Patricia S\xE1nchez",destino:"Florida 234",estado:"entregado",tiempoEstimado:20,canal:"whatsapp",observaciones:"Dejar en recepci\xF3n"},{id:"p5",fechaHora:new Date("2024-04-24T15:30:00"),cliente:"Roberto Garc\xEDa",destino:"Lavalle 567",estado:"pendiente",tiempoEstimado:40,canal:"web",observaciones:"Timbre 2B"}]};var b=class d{constructor(e){this.http=e}apiUrl=`${h.apiUrl}/distribuidores`;useMockData=!0;getDistribuidor(e){if(this.useMockData){let i=n.find(r=>r.id===e);return i?t(i):a(()=>new Error("Distribuidor no encontrado"))}return this.http.get(`${this.apiUrl}/${e}`).pipe(o(this.handleError))}updateDistribuidor(e){if(this.useMockData){let i=n.findIndex(r=>r.id===e.id);return i!==-1?(n[i]=c(p({},e),{ultimaActualizacion:new Date}),t(n[i])):a(()=>new Error("Distribuidor no encontrado"))}return this.http.put(`${this.apiUrl}/${e.id}`,e).pipe(o(this.handleError))}getPedidosHistorial(e){if(this.useMockData){let i=s[e]||[];return t(i)}return this.http.get(`${this.apiUrl}/${e}/pedidos`).pipe(o(this.handleError))}getPedidos(e){if(this.useMockData){let i=s[e]||[];return t(i)}return this.http.get(`${this.apiUrl}/${e}/pedidos`).pipe(o(this.handleError))}updatePedido(e){if(this.useMockData){let i=Object.values(s).flat(),r=i.findIndex(D=>D.id===e.id);return r!==-1?(i[r]=p({},e),t(i[r])):a(()=>new Error("Pedido no encontrado"))}return this.http.put(`${this.apiUrl}/pedidos/${e.id}`,e).pipe(o(this.handleError))}exportPedido(e){return this.useMockData?t(!0):this.http.post(`${this.apiUrl}/pedidos/${e.id}/export`,{}).pipe(o(this.handleError))}handleError(e){let i="Ha ocurrido un error en el servidor";return e.error instanceof ErrorEvent?i=`Error: ${e.error.message}`:i=`Error Code: ${e.status}
Message: ${e.message}`,console.error(i),a(()=>new Error(i))}static \u0275fac=function(i){return new(i||d)(u(m))};static \u0275prov=l({token:d,factory:d.\u0275fac,providedIn:"root"})};export{b as a};
