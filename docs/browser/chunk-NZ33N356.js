import{a as i}from"./chunk-YCMZOG5D.js";import{a as s}from"./chunk-X7ZST7BG.js";import{_ as o,da as n}from"./chunk-G46DRSWM.js";var l=class r{constructor(e){this.http=e;this.loadSession()}currentUser=null;token=null;apiUrl=`${i.apiUrl}/auth`;login(e){return this.http.post(`${this.apiUrl}/signin`,e)}loadSession(){let e=localStorage.getItem("token"),t=localStorage.getItem("currentUser");if(e&&t)try{this.token=e,this.currentUser=JSON.parse(t)}catch(a){console.error("Error al cargar la sesi\xF3n:",a),this.logout()}}setSession(e){localStorage.setItem("token",e.token),localStorage.setItem("currentUser",JSON.stringify(e.user)),this.token=e.token,this.currentUser=e.user}logout(){localStorage.removeItem("token"),localStorage.removeItem("currentUser"),this.token=null,this.currentUser=null}isLoggedIn(){return!!this.token&&!!this.currentUser}getToken(){return this.token||this.loadSession(),this.token}getCurrentUser(){return this.currentUser||this.loadSession(),this.currentUser}static \u0275fac=function(t){return new(t||r)(n(s))};static \u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})};export{l as a};
